<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>0x03以太坊智能合约开发环境搭建及Hello World的初步尝试 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="开发环境搭建Geth下载以太坊的官网地址详见这里，官网会自动识别当前系统，在首页提供对应操作系统的下载链接；也可直接访问 Geth 下载专区进行下载，由于官网的下载经常抽风，可通过此镜像下载。 在官网的页面会看到 4 种类型的程序，分别支持 Win、Mac、Linux 和源码安装，根据自己的系统选择对应的安装程序。 Geth安装安装步骤没有过多可介绍的，直接执行对应的程序即可安装。如果采用源代码安">
<meta property="og:type" content="article">
<meta property="og:title" content="0x03以太坊智能合约开发环境搭建及Hello World的初步尝试">
<meta property="og:url" content="http://yoursite.com/2019/04/12/0x03以太坊智能合约开发环境搭建及Hello-World的初步尝试/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="开发环境搭建Geth下载以太坊的官网地址详见这里，官网会自动识别当前系统，在首页提供对应操作系统的下载链接；也可直接访问 Geth 下载专区进行下载，由于官网的下载经常抽风，可通过此镜像下载。 在官网的页面会看到 4 种类型的程序，分别支持 Win、Mac、Linux 和源码安装，根据自己的系统选择对应的安装程序。 Geth安装安装步骤没有过多可介绍的，直接执行对应的程序即可安装。如果采用源代码安">
<meta property="og:locale" content="default">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/13188628-74d5b02ca0ffd9ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/13188628-59e8806a4a00edba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/13188628-80f16a48dc0c1ed7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/13188628-9c864d7160a08466.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/13188628-b7736a5ed64b0d60.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/13188628-60775d77f1e8bfe0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/13188628-7a3d61dd0644a082.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/13188628-f6b76144943f5b56.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/13188628-2948eeab9f70d432.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:updated_time" content="2019-04-12T15:29:05.612Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="0x03以太坊智能合约开发环境搭建及Hello World的初步尝试">
<meta name="twitter:description" content="开发环境搭建Geth下载以太坊的官网地址详见这里，官网会自动识别当前系统，在首页提供对应操作系统的下载链接；也可直接访问 Geth 下载专区进行下载，由于官网的下载经常抽风，可通过此镜像下载。 在官网的页面会看到 4 种类型的程序，分别支持 Win、Mac、Linux 和源码安装，根据自己的系统选择对应的安装程序。 Geth安装安装步骤没有过多可介绍的，直接执行对应的程序即可安装。如果采用源代码安">
<meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/13188628-74d5b02ca0ffd9ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-0x03以太坊智能合约开发环境搭建及Hello-World的初步尝试" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/04/12/0x03以太坊智能合约开发环境搭建及Hello-World的初步尝试/" class="article-date">
  <time datetime="2019-04-12T15:28:51.000Z" itemprop="datePublished">2019-04-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      0x03以太坊智能合约开发环境搭建及Hello World的初步尝试
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="开发环境搭建"><a href="#开发环境搭建" class="headerlink" title="开发环境搭建"></a>开发环境搭建</h2><h4 id="Geth下载"><a href="#Geth下载" class="headerlink" title="Geth下载"></a>Geth下载</h4><p>以太坊的官网地址<a href="https://ethereum.org/" target="_blank" rel="noopener">详见这里</a>，官网会自动识别当前系统，在首页提供对应操作系统的下载链接；也可直接访问 <a href="https://geth.ethereum.org/downloads/" target="_blank" rel="noopener">Geth 下载专区</a>进行下载，由于官网的下载经常抽风，可通过此<a href="https://ethfans.org/wikis/Ethereum-Geth-Mirror" target="_blank" rel="noopener">镜像下载</a>。 在官网的页面会看到 4 种类型的程序，分别支持 Win、Mac、Linux 和源码安装，根据自己的系统选择对应的安装程序。</p>
<h4 id="Geth安装"><a href="#Geth安装" class="headerlink" title="Geth安装"></a>Geth安装</h4><p>安装步骤没有过多可介绍的，直接执行对应的程序即可安装。如果采用源代码安装需先搭建 Go 编程语言环境，同时需要一定的 Go 语言基础，然后参考 GitHub 上的安装步骤安装即可。此非本节重点内容这里就不再赘述了。</p>
<p>无论在什么操作系统下安装完成，我们能够找的可执行的程序是 Geth。</p>
<p>####<a href="https://learnblockchain.cn/2017/11/24/init-env/#Solidity%E5%AE%89%E8%A3%85" title="Solidity安装" target="_blank" rel="noopener"></a>Solidity安装</p>
<p>强烈建议新手使用<a href="http://remix.ethereum.org/" target="_blank" rel="noopener">Remix -Solidity IDE</a>来进行开发。<br>Remix 是一个基于浏览器的Solidity，就可以不用安装Solidity，本文也将基于Remix Solidity IDE来进行。</p>
<p>##启动环境<br>geth是一个以太坊客户端，现在利用 geth 启动一个以太坊（开发者）网络节点。(以linux下为例)</p>
<blockquote>
<p>./geth –datadir testNet –dev console 2&gt;&gt; test.log</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/13188628-74d5b02ca0ffd9ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="执行后如图所示进入控制台"></p>
<p>–dev 启用开发者网络（模式），开发者网络会使用POA共识，默认预分配一个开发者账户并且会自动开启挖矿。<br>–datadir 后面的参数是区块数据及秘钥存放目录。<br>第一次输入命令后，它会放在当前目录下新建一个testNet目录来存放数据。<br>console 进入控制台<br>2&gt;&gt; test.log 表示把控制台日志输出到test.log文件</p>
<p>为了更好的理解，建议新开一个命令行终端，实时显示日志：</p>
<blockquote>
<p>tail -f test.log</p>
</blockquote>
<p>##准备账户</p>
<p>#####查看开发者账户：</p>
<blockquote>
<p>eth.accounts</p>
</blockquote>
<p>#####使用以下命令创建账户：</p>
<blockquote>
<p>personal.newAccount(“one”)</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/13188628-59e8806a4a00edba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="查看现在账户列表"></p>
<p>#####给新账户转账：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">eth.sendTransaction(&#123;from: &apos;0x0ead15dfc60a2697fb0f61f6196a8bf672180149&apos;, to: &apos;0x8de9e70d50cd36c1e00b5307817e0a32f0285095&apos;, value: web3.toWei(1, &quot;ether&quot;)&#125;)</span><br></pre></td></tr></table></figure></p>
<p>看清楚账户地址从哪里来到哪里去。</p>
<p>#####查看余额：</p>
<blockquote>
<p>eth.getBalance(eth.accounts[1])</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/13188628-80f16a48dc0c1ed7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="账户one的余额"></p>
<p>#####解锁账户：<br>部署合约前需要先解锁账户（就像银行转账要输入密码一样），使用以下命令：</p>
<blockquote>
<p>personal.unlockAccount(eth.accounts[1],”one”)</p>
</blockquote>
<p>one是创建的那个账户，这里要根据你实际创建的名字来填。</p>
<p>##编写智能合约<br>在Remix -Solidity IDE里新建一个文件<br><img src="https://upload-images.jianshu.io/upload_images/13188628-9c864d7160a08466.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="文件名就叫hello吧"></p>
<p>#####写合约代码<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">pragma solidity ^0.4.18;</span><br><span class="line">contract hello &#123;</span><br><span class="line">    string greeting;</span><br><span class="line">    </span><br><span class="line">    function hello(string _greeting) public &#123;</span><br><span class="line">        greeting = _greeting;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    function say() constant public returns (string) &#123;</span><br><span class="line">        return greeting;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>我们定义了一个名为hello的合约，在合约初始化时保存了一个字符串（我们会传入hello world），每次调用say返回字符串。<br>ctrl+s保存一下，在IDE的右边点击Details<br><img src="https://upload-images.jianshu.io/upload_images/13188628-b7736a5ed64b0d60.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>在弹出的对话框中找到WEB3DEPLOY部分，点拷贝，粘贴到编辑器后，修改初始化字符串为hello world。<br><img src="https://upload-images.jianshu.io/upload_images/13188628-60775d77f1e8bfe0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="这个把它粘贴出来到文本编辑器修改"><br>修改之后如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var _greeting = &quot;Hello World&quot; ;</span><br><span class="line">var helloContract = web3.eth.contract([&#123;&quot;constant&quot;:true,&quot;inputs&quot;:[],&quot;name&quot;:&quot;say&quot;,&quot;outputs&quot;:[&#123;&quot;name&quot;:&quot;&quot;,&quot;type&quot;:&quot;string&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;view&quot;,&quot;type&quot;:&quot;function&quot;&#125;,&#123;&quot;inputs&quot;:[&#123;&quot;name&quot;:&quot;_greeting&quot;,&quot;type&quot;:&quot;string&quot;&#125;],&quot;payable&quot;:false,&quot;stateMutability&quot;:&quot;nonpayable&quot;,&quot;type&quot;:&quot;constructor&quot;&#125;]);</span><br><span class="line">var hello = helloContract.new(</span><br><span class="line">   _greeting,</span><br><span class="line">   &#123;</span><br><span class="line">     from: web3.eth.accounts[1], </span><br><span class="line">     data: &apos;0x608060405234801561001057600080fd5b506040516102a83803806102a8833981018060405281019080805182019291905050508060009080519060200190610049929190610050565b50506100f5565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061009157805160ff19168380011785556100bf565b828001600101855582156100bf579182015b828111156100be5782518255916020019190600101906100a3565b5b5090506100cc91906100d0565b5090565b6100f291905b808211156100ee5760008160009055506001016100d6565b5090565b90565b6101a4806101046000396000f300608060405260043610610041576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff168063954ab4b214610046575b600080fd5b34801561005257600080fd5b5061005b6100d6565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561009b578082015181840152602081019050610080565b50505050905090810190601f1680156100c85780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b606060008054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561016e5780601f106101435761010080835404028352916020019161016e565b820191906000526020600020905b81548152906001019060200180831161015157829003601f168201915b50505050509050905600a165627a7a72305820ec8886663da8b3392f1bd03a6894f0c1ef7723ba5afe5347d7630a4fdd69b05d0029&apos;, </span><br><span class="line">     gas: &apos;4700000&apos;</span><br><span class="line">   &#125;, function (e, contract)&#123;</span><br><span class="line">    console.log(e, contract);</span><br><span class="line">    if (typeof contract.address !== &apos;undefined&apos;) &#123;</span><br><span class="line">         console.log(&apos;Contract mined! address: &apos; + contract.address + &apos; transactionHash: &apos; + contract.transactionHash);</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure></p>
<p>第1行：修改字符串为Hello World<br>第2行：修改合约变量名<br>第3行：修改合约实例变量名，之后可以直接用实例调用函数。<br>第6行：修改部署账户为新账户索引，即使用新账户来部署合约。<br>第8行：准备付的gas费用，IDE已经帮我们预估好了。<br>第9行：设置部署回调函数。</p>
<p>#####然后把它复制到geth控制台<br><img src="https://upload-images.jianshu.io/upload_images/13188628-7a3d61dd0644a082.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt><br>出现最后一行则成功了<br>查看下新账户的余额：<br><img src="https://upload-images.jianshu.io/upload_images/13188628-f6b76144943f5b56.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="变少了"></p>
<p>##运行合约</p>
<blockquote>
<p>hello.say()</p>
</blockquote>
<p><img src="https://upload-images.jianshu.io/upload_images/13188628-2948eeab9f70d432.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt></p>
<p>至此智能合约开发流程体验就完毕了，日后将继续探索真正有用的合约的编写和不部署。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/04/12/0x03以太坊智能合约开发环境搭建及Hello-World的初步尝试/" data-id="cjue88ljx0001ugutwwba5ofz" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2019/04/12/0x02开发、部署第一个去中心化应用-Dapp-宠物商店/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">0x02开发、部署第一个去中心化应用(Dapp) - 宠物商店</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2019/04/12/0x03以太坊智能合约开发环境搭建及Hello-World的初步尝试/">0x03以太坊智能合约开发环境搭建及Hello World的初步尝试</a>
          </li>
        
          <li>
            <a href="/2019/04/12/0x02开发、部署第一个去中心化应用-Dapp-宠物商店/">0x02开发、部署第一个去中心化应用(Dapp) - 宠物商店</a>
          </li>
        
          <li>
            <a href="/2019/04/12/0x01创建自己的数字货币（代币）进行ICO/">0x01创建自己的数字货币（代币）进行ICO</a>
          </li>
        
          <li>
            <a href="/2019/04/11/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>